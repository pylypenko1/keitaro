jQuery(document).ready((function(i){"use strict";if(i(document).on("click",".heart_thumb_wrap .heartplus",(function(t){t.preventDefault();var s=i(this);if(s.hasClass("restrict_for_guests"))return!1;var e=i(this).data("post_id"),h=parseInt(i(this).attr("data-informer"));if(i(this).addClass("loading"),s.hasClass("alreadywish")){s.data("wishlink");if(void 0!==s.data("wishlink")&&""!=s.data("wishlink")&&0==i(".re-favorites-posts").length)return window.location.href=s.data("wishlink"),!1;var a="remove"}else a="add";return i.ajax({type:"post",url:rhscriptvars.ajax_url,data:"action=rhwishlist&wishnonce="+rhscriptvars.wishnonce+"&wish_count="+a+"&post_id="+e}).done((function(t){if(s.removeClass("loading"),s.hasClass("alreadywish")){if(s.removeClass("alreadywish"),h-=1,s.closest(".heart_thumb_wrap").find("#wishcount"+e).text(h),i(".rh-wishlistmenu-link .rh-icon-notice").length){var a=parseInt(i(".rh-wishlistmenu-link .rh-icon-notice").html());i(".rh-wishlistmenu-link .rh-icon-notice").text(a-1)}s.attr("data-informer",h),i("#wishremoved"+e).length>0&&i.simplyToast(i("#wishremoved"+e).html(),"danger")}else{if(s.addClass("alreadywish"),h+=1,s.closest(".heart_thumb_wrap").find("#wishcount"+e).text(h),i(".rh-wishlistmenu-link .rh-icon-notice").length)if(i(".rh-wishlistmenu-link .rh-icon-notice").hasClass("rhhidden"))i(".rh-wishlistmenu-link .rh-icon-notice").removeClass("rhhidden"),i(".rh-wishlistmenu-link .rh-icon-notice").text(1);else{a=parseInt(i(".rh-wishlistmenu-link .rh-icon-notice").html());i(".rh-wishlistmenu-link .rh-icon-notice").text(a+1)}s.attr("data-informer",h),i("#wishadded"+e).length>0&&i.simplyToast(i("#wishadded"+e).html(),"success")}})),!1})),"undefined"!=typeof wishcached){var t=i(".heartplus");0!=t.length&&i.ajax({type:"get",url:wishcached.rh_ajax_url,data:"action=refreshwishes&userid="+wishcached.userid,cache:!1}).done((function(s){var e=s.wishlistids.split(",");0!=e.length&&(t.each((function(){var t=i(this).attr("data-post_id");if(-1!=i.inArray(t,e)&&0==i(this).hasClass("alreadywish")){i(this).addClass("alreadywish");var s=parseInt(i(this).attr("data-informer"));s+=1,i(this).attr("data-informer",s),i(this).closest(".heart_thumb_wrap").find("#wishcount"+t).text(s)}})),i(".rh-wishlistmenu-link .rh-icon-notice").length&&(i(".rh-wishlistmenu-link .rh-icon-notice").hasClass("rhhidden")&&i(".rh-wishlistmenu-link .rh-icon-notice").removeClass("rhhidden"),i(".rh-wishlistmenu-link .rh-icon-notice").text(s.wishcounter)))}))}}));