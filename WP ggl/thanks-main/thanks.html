<!DOCTYPE html>
<html lang="ru">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex,nofollow" />
  <title>Вашу заявку принято!</title>
  <link rel="stylesheet" type="text/css" href="css/thanks.css" />
  <link rel="icon" href="images/logo.png" type="image/png" />

  <!-- JavaScript для извлечения параметра из URL и динамической загрузки скрипта -->
  <script>
    function getUrlParameter(name) {
      name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
      const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
      const results = regex.exec(location.search);
      return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    const gglPixelValue = getUrlParameter('idpxl');
    const gglPixelParts = gglPixelValue.split('/');

    const fullPixel = gglPixelValue;
    const basePixel = gglPixelParts[0];

    // Создаем элемент script и добавляем его в head
    const script1 = document.createElement('script');
    script1.src = 'https://www.googletagmanager.com/gtag/js?id=' + basePixel;
    script1.async = true;
    document.head.appendChild(script1);

    const script2 = document.createElement('script');
    script2.innerHTML = `
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag("js", new Date());
    gtag("config", "${basePixel}");
    gtag("event", "conversion", { "send_to": "${fullPixel}" });
    `;
    document.head.appendChild(script2);
   
  </script>


</head>

<body class="thank_page_main">
  <div class="thank_page_body">
    <!-- <img class="thank_logo" src="images/logo.png" alt="logo" /> -->
    <div class="thank_page_wrap">
      <p class="sub_title_message">Вашу заявку <br> успешно принято!</p>
      <p class="message">
        После проверки Ваших данных с Вами свяжется финансовый менеджер для подтверждения регистрации в течение:
      </p>
      <!-- <p class="message">Ваш личный консультант свяжется с вами через:</p> -->
      <div class="counter-wrapper">
        <div class="numbers-wrapper">
          <div class="numbers-block-outer">
            <div class="numbers-block-inner">
              <span class="current-number hours">23</span>
            </div>
          </div>
          <span class="time-measure hours-span">часа</span>
        </div>
        <div class="numbers-wrapper">
          <div class="numbers-block-outer">
            <div class="numbers-block-inner">
              <span class="current-number minutes">51</span>
            </div>
          </div>
          <span class="time-measure minutes-span">минут</span>
        </div>
        <div class="numbers-wrapper">
          <div class="numbers-block-outer">
            <div class="numbers-block-inner">
              <span class="current-number seconds">23</span>
            </div>
          </div>
          <span class="time-measure seconds-span">секунд</span>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
  /* COUNTER */

  var localStorage = window.localStorage,
    startDate;

  if (localStorage.getItem('startDate')) {
    startDate = localStorage.getItem('startDate');
  } else {
    startDate = new Date();
    localStorage.setItem('startDate', startDate);
  }
  setTimer(startDate);

  function setTimer(startDate) {
    var deadline = new Date(Date.parse(startDate) + 1 * 24 * 60 * 60 * 1000);
    initializeClock('countdown', deadline);
  }

  // Countdown
  function getTimeRemaining(endtime) {
    var t = Date.parse(endtime) - Date.parse(new Date());
    var seconds = Math.floor((t / 1000) % 60);
    var minutes = Math.floor((t / 1000 / 60) % 60);
    var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
    return {
      total: t,
      hours: hours,
      minutes: minutes,
      seconds: seconds,
    };
  }

  function initializeClock(id, endtime) {
    var clock = document.querySelector('.counter-wrapper');
    var hoursSpan = clock.querySelector('.hours');
    var minutesSpan = clock.querySelector('.minutes');
    var secondsSpan = clock.querySelector('.seconds');

    function updateClock() {
      var t = getTimeRemaining(endtime);

      hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
      minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
      secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

      if (t.total <= 0) {
        startDate = new Date();
        localStorage.setItem('startDate', startDate);
        var deadline = new Date(Date.parse(startDate) + 24 * 60 * 60 * 1000);
        initializeClock('countdown', deadline);
        clearInterval(timeinterval);
      }
    }

    updateClock();
    var timeinterval = setInterval(updateClock, 1000);
  }
</script>

<script src="js/trackerConversion.js"></script>
<script src="https://api.solutionsulting.com/js/redirect.js"></script>

</html>