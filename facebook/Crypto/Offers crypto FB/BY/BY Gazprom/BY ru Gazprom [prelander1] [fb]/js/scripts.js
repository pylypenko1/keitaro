var scroll_items=Array();function close_search(e){e&&document.getElementById(e)&&(document.getElementById(e).style.display="none")}function open_search(e){e&&document.getElementById(e)&&(document.getElementById(e).style.display="block")}var fixed_height=0,menu_fixed=!1,lenta_fixed=!1,social_fixed=!1;function fix_lenta_left(){window.innerWidth<=790?$("#top_lenta").css("left","0"):$("#top_lenta").css("left",$("#menu_line").offset().left+"px")}function fix_lenta(e,t){lenta_fixed=!0;var n=e.clone().attr("id","cloned_lenta");e.addClass("fixed_el"),e.css("top",t+"px"),fixed_height+=e.outerHeight(),n.appendTo(e.parent()),$(".last_news_fp .tl_inner").length&&$(".last_news_fp .tl_inner").css("max-height",prev_height+"px")}function prepare_fix_el(e){var t=$("<div/>");e.wrap(t)}function unfix_lenta(e){lenta_fixed=!1,$("#tl_inner").hasClass("tl_inner_all")&&$("#tl_inner").removeClass("tl_inner_all").addClass("tl_inner"),fixed_height-=e.outerHeight(),e.removeClass("fixed_el"),$("#tl_arrow").removeClass("tl_arrow_close"),$(".lenta_date_past").removeClass("date_past_hide"),e.css("top","auto"),$("#cloned_lenta").remove(),$(".last_news_fp .tl_inner").length&&(set_lenta_main_height(),$(".last_news_fp .tl_inner").css("max-height",lenta_main_height+"px"))}function prepare_fix(e){set_lenta_main_height(),prepare_fix_el($(".menu_line")),$(".menu_line").attr("id","menu_line"),prepare_fix_el($(".top_lenta")),$(".top_lenta").attr("id","top_lenta"),check_fixed(e),$(window).scroll((function(){check_fixed(e),change_menu()}))}function check_fixed(e){if(!menu_fixed&&$(window).scrollTop()>=$("#menu_line").offset().top){menu_fixed=!0,fixed_height=$("#menu_line").outerHeight();var t=$("#menu_line").clone().attr("id","cloned_menu");$("#menu_line").addClass("menu_fixed"),t.appendTo($("#menu_line").parent()),e||fix_lenta($("#top_lenta"),fixed_height)}else!e&&menu_fixed&&$(window).scrollTop()<$("#cloned_menu").offset().top+$("#cloned_menu").outerHeight()+$("#cloned_lenta").outerHeight()-fixed_height?(menu_fixed=!1,unfix_lenta($("#top_lenta")),$("#menu_line").removeClass("menu_fixed"),$("#cloned_menu").remove(),fixed_height-=$(".menu_line").outerHeight()):menu_fixed&&$(window).scrollTop()<$("#cloned_menu").offset().top+$("#cloned_menu").outerHeight()-fixed_height&&(menu_fixed=!1,e||unfix_lenta($("#top_lenta")),$("#menu_line").removeClass("menu_fixed"),$("#cloned_menu").remove(),fixed_height-=$(".menu_line").outerHeight());e&&!lenta_fixed&&$(window).scrollTop()>=$("#top_lenta").offset().top+$("#top_lenta").height()-fixed_height?(fix_lenta($("#top_lenta"),fixed_height),window.innerWidth<=790?$("#top_lenta").css("left","0"):$("#top_lenta").css("left",$("#menu_line").offset().left+"px"),$(window).on("resize",fix_lenta_left)):e&&lenta_fixed&&$(window).scrollTop()<$("#cloned_lenta").offset().top+$("#cloned_lenta").outerHeight()-fixed_height-10&&(unfix_lenta($("#top_lenta")),$("#top_lenta").css("left","auto"),$(window).off("resize",fix_lenta_left))}function get_page(e,t,n,l,d,i,o){if(document.getElementById(t)){l||(l=""),d||(d=""),i||(i=0),!i&&document.getElementById("pages"+l)&&(document.getElementById("pages"+l).innerHTML=d+'<div class="preloader"></div>'),n&&3!=n||(document.getElementById(t).innerHTML=d+'<div class="preloader"></div>');var a=new XMLHttpRequest,_="xhr=html&r="+Math.random();return-1==e.indexOf("?")?("/"!=e[e.length-1]&&(e+="/"),e+="?"+_):("/"==e[e.length-1]&&(e=e.substr(0,e.length-1)),e+="&"+_),a.open("GET",e),a.onreadystatechange=function(){if(4==a.readyState)return!i&&document.getElementById("pages"+l)&&document.getElementById(t).removeChild(document.getElementById("pages"+l)),3==n?document.getElementById(t).outerHTML=a.responseText:document.getElementById(t).innerHTML=n?document.getElementById(t).innerHTML+a.responseText:a.responseText,200==a.status&&o&&(location.href="#go_to_up"),!1},a.send(null),!1}}function show_filtr(e,t,n){from_day=$("#from_day").datepicker("getDate"),from_days=$.datepicker.formatDate("dd.mm.yy",from_day),to_day=$("#to_day").datepicker("getDate"),to_days=$.datepicker.formatDate("dd.mm.yy",to_day);for(var l=document.getElementsByName("period"),d=0;d<l.length;d++)"radio"===l[d].type&&l[d].checked&&(period=l[d].value);return get_page(e=e+"&from_day="+from_days+"&to_day="+to_days+"&period="+period,t,0,"","",1),!0}function just_titles(e,t){e&&document.getElementById(e)&&(t?$("#"+e).removeClass("lenta_short"):$("#"+e).addClass("lenta_short"))}function change_menu(){prefix="h_menu";for(var e=$("#"+prefix+"_fp").parent().outerWidth()-100,t=$("#"+prefix+"_fp").parent().children(),n=0;n<t.length;n++){if(t[n].id!=prefix+"_fp"&&"search"!=t[n].id)e-=$(t[n]).outerWidth()}var l=$("#"+prefix+"_s").outerWidth(),d=$("#"+prefix+"_line_1"),i=$("#"+prefix+"_s"),o=i.children().length,a=d.children().length+o;if(e>l){for(n=o;n<a;n++)if(i.append($("#"+prefix+"_item_1_"+n)),$("#"+prefix+"_s").outerWidth()>e){d.prepend($("#"+prefix+"_item_1_"+n));break}}else for(n=a-1;n>=o&&l>e;n--)l-=$("#"+prefix+"_item_1_"+n).outerWidth(),d.prepend($("#"+prefix+"_item_1_"+n));i.children().length>0?($("#"+prefix+"_title").css("display","none"),$("#"+prefix+"_more").css("display","block"),$("#"+prefix+"_fp").removeClass("h_menu_open")):($("#"+prefix+"_title").css("display","block"),$("#"+prefix+"_more").css("display","none"),$("#"+prefix+"_fp").addClass("h_menu_open")),e<$("#"+prefix+"_fp").outerWidth()-100&&change_menu()}function create_menu(e){change_menu(),$(window).on("resize",change_menu)}function js_hover(e){var t=e.data.drop_el;"block"==t.css("display")?t.css("display",""):t.css("display","block")}function prepare_js_hover(e){for(var t=0;t<e.length;t++)e[t].el.on("click",e[t],js_hover)}function open_hide_menu_item(e,t){document.getElementById(e)&&document.getElementById(t)&&(document.getElementById(t).style.display&&"none"!=document.getElementById(t).style.display&&""!=document.getElementById(t).style.display?(document.getElementById(t).style.display="none",document.getElementById(e).classList.remove("clicked")):(document.getElementById(t).style.display="block",document.getElementById(e).classList.add("clicked")))}null!==document.getElementById("search_adv")&&(document.getElementById("search_adv").onclick=function(){for(var e=document.getElementsByName("period"),t=0;t<e.length;t++)if("radio"===e[t].type&&e[t].checked&&"period"==e[t].value){var n=document.getElementById("to_day"),l=document.getElementById("from_day");n.disabled=!1,l.disabled=!1}else if("radio"===e[t].type&&e[t].checked&&"all"==e[t].value){n=document.getElementById("to_day"),l=document.getElementById("from_day");n.disabled=!0,l.disabled=!0,$("#to_day").val(""),$("#from_day").val("")}else if("radio"===e[t].type&&e[t].checked&&"period"!==e[t].value){n=document.getElementById("to_day"),l=document.getElementById("from_day");n.disabled=!0,l.disabled=!0}});